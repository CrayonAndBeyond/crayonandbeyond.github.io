// Language translations
const translations = {
  en: {
    projects: [
      {
        id: "alphabet",
        title: "Learning letters",
        description:
          "Combine learning and creativity with this colorful alphabet activity book! Each page features a large letter surrounded by illustrations of words beginning with that letter, ready for your child to color. A fun, interactive way to master the alphabet while developing fine motor skills and building vocabulary.",
        cover: "img/alphabet-cover.jpg",
        previewTitle: "Learning letters - Preview",
        images: ["img/alphabet-1.jpg", "img/alphabet-2.jpg"],
        previewDescription: `
            <p>Discover an engaging way to introduce your child to the alphabet. This interactive coloring activity book combines creative fun with early literacy learning. Each page features a bold letter in the center, surrounded by colorful illustrations of words that start with that letter. Perfect for children to color, learn, and explore new vocabulary all at once.</p>
            <p>Why kids love it:</p>
            <ul>
              <li>Helps reinforce letter recognition and phonics</li>
              <li>Encourages fine motor skill development through coloring</li>
              <li>Makes learning the alphabet fun and interactive</li>
              <li>Ideal for preschool and early elementary ages</li>
            </ul>
          `,
      },
      {
        id: "math",
        title: "Learning numbers",
        description:
          "Explore numbers in a fun, interactive way with this engaging coloring activity book. Each page is packed with multiple learning activities designed to build number recognition and counting skills. Each page offers a variety of engaging activities, all designed for coloring and making learning numbers an adventure!",
        cover: "img/numbers-cover.jpg",
        previewTitle: "Learning numbers - Preview",
        images: ["img/numbers-1.jpg", "img/numbers-2.jpg"],
        previewDescription: `
            <p>Children will:</p>
            <ul>
              <li>Spot & Circle - Find the correct number hidden among other numbers on the page</li>
              <li>Trace & Learn - Practice writing numbers with guided tracing exercises, seeing both the numeral and its written word form</li>
              <li>Count & Color - Complete fun counting challenges like "How many butterflies?" and matching activities where they identify objects that match each number</li>
              <li>Color & Create - Bring every page to life with colors</li>
            </ul>
          `,
      },
      {
        id: "roadFun",
        title: "Busy Book On-The-Go!",
        description:
          "Keep your kids entertained anywhere with this compact, printable activity book, perfect for travel, waiting rooms, or car rides. Packed with engaging brain-teasing activities in a small format that's easy to carry and print.",
        cover: "img/roadFun-cover.jpg",
        previewTitle: "Busy Book On-The-Go! - Preview",
        images: ["img/roadFun-1.jpg", "img/roadFun-2.jpg"],
        previewDescription: `
            <p>Lightweight, portable, and endlessly entertaining, your secret weapon for keeping kids busy on the go!</p>
            <p>Activities include:</p>
            <ul>
              <li>Matching - Associate and match colors to objects and patterns</li>
              <li>Concept Pairing - Connect related concepts and ideas together</li>
              <li>Shadow Matching - Find and match objects to their correct shadows</li>
              <li>Spot the Odd One Out - Identify the intruder (the object that doesn't belong in the group)</li>
              <li>Habitat Matching - Place animals in their natural environments</li>
            </ul>
            <p>Why parents love it:</p>
            <ul>
              <li>Compact size perfect for travel, restaurants, and waiting areas</li>
              <li>Easy to print at home, no special materials needed</li>
              <li>Keeps kids focused and engaged for hours</li>
              <li>Develops critical thinking and observation skills</li>
              <li>Screen-free entertainment</li>
            </ul>
          `,
      },
      {
        id: "backpackFun",
        title: "Trace & Learn Activity Book",
        description:
          "Develop essential pre-writing skills with this engaging tracing activity book. Perfect for building fine motor control, hand-eye coordination, and confidence before kids begin writing. Each page offers a variety of tracing challenges to keep learning fun and varied.",
        cover: "img/backpackFun-cover.jpg",
        previewTitle: "Trace & Learn Activity Book - Preview",
        images: ["img/backpackFun-1.jpg", "img/backpackFun-2.jpg"],
        previewDescription: `
            <p>Every page is thoughtfully designed to make tracing an adventure, not a chore. Watch your child's confidence and skills grow with every completed page!</p>
            <p>Activities include:</p>
            <ul>
              <li>Tracing - Follow different types of lines (straight, wavy, zigzag, curved) to build pen control</li>
              <li>Shape & Pattern Tracing - Trace basic shapes and decorative patterns to develop precision</li>
              <li>Dot-to-Dot Connections - Connect numbered and non-numbered dots to reveal fun pictures</li>
              <li>Number Tracing - Practice writing numbers with guided dotted lines and visual guides</li>
              <li>Letter Tracing - Master letter formation with step-by-step tracing exercises</li>
            </ul>
            <p>Why kids love it:</p>
            <ul>
              <li>Builds confidence and independence in pre-writing skills</li>
              <li>Makes learning fun and interactive through varied activities</li>
              <li>Develops hand strength and control needed for writing</li>
              <li>Perfect for preschool and early elementary ages</li>
            </ul>
          `,
      },
      {
        id: "routine",
        title: "Routine board",
        description:
          "Make mornings and bedtimes easier with this interactive routine board designed to help children build healthy habits and independence. Each board features colorful illustrations paired with clear text for every daily task, creating a visual checklist that kids can follow on their own.",
        cover: "img/routine-cover.jpg",
        previewTitle: "Routine board - Preview",
        images: ["img/routine-1.jpg", "img/routine-2.jpg"],
        previewDescription: `
            <p>Transform chaotic mornings and bedtimes into smooth, stress-free routines‚Äîone checkmark at a time!</p>
            <p>How it works:</p>
            <ul>
              <li>Visual & Text Cues - Each activity is represented with an engaging image and simple text (brush teeth, get dressed, eat etc.)</li>
              <li>Track Progress - Kids mark off each task as they complete it, building a sense of accomplishment</li>
              <li>Morning & Night Versions - Separate boards for different routines throughout the day</li>
              <li>Reusable Design - Perfect for laminating or placing in a frame with dry-erase markers</li>
            </ul>
            <p>Why parents love it:</p>
            <ul>
              <li>Reduces morning and bedtime struggles by giving kids clear expectations</li>
              <li>Builds independence and responsibility in young children</li>
              <li>Visual format is perfect for pre-readers and early readers</li>
              <li>Creates consistent routines that help kids feel secure and confident</li>
              <li>Makes daily tasks fun instead of frustrating</li>
            </ul>
            <p>Perfect for:</p>
            <ul>
              <li>Toddlers and preschoolers learning self-care routines</li>
              <li>Reducing daily power struggles</li>
              <li>Building time management skills early</li>
              <li>Creating structure in busy family mornings and evenings</li>
            </ul>
          `,
      },
      {
        id: "cards",
        title: "Activity Cards - 56 Fun Challenges!",
        description:
          "Activity cards with the theme: Holiday and Travel. Transform travel time and vacations into exciting learning adventures with this set of 56 engaging activity cards. Perfect for road trips, flights, hotel rooms, or exploring new destinations, these cards keep kids entertained while learning through play.",
        cover: "img/cards.jpg",
        previewTitle: "Activity cards - Preview",
        images: ["img/cards-1.jpg", "img/cards-2.jpg"],
        previewDescription: `
            <p>There are 6 Activity Categories:</p>
            <ul>
              <li>üîç Observation & Discovery Activitie</li>
              <li>üé® Creative Paper Activitie</li>
              <li>üéµ Musical & Rhythm Activitie</li>
              <li>üìö Simple Educational Activities</li>
              <li>üé≠ Role-Play Activities</li>
              <li>üëê Sensory Activities</li>
            </ul>
            <p>Why families love these cards:</p>
            <ul>
              <li>56 different activities mean endless entertainment</li>
              <li>Compact and portable‚Äîperfect for travel</li>
              <li>No screens required‚Äîencourage active engagement</li>
              <li>Builds observation skills, creativity, and imagination</li>
              <li>Works in multiple settings: car, plane, hotel, outdoors</li>
            </ul>
            <p>Perfect for:</p>
            <ul>
              <li>Road trips and long car ridess</li>
              <li>Airplane travel and airport waiting</li>
              <li>Hotel room entertainment</li>
              <li>Beach and outdoor adventures</li>
              <li>Keeping kids engaged while exploring new places</li>
            </ul>
          `,
      },
    ],
  },
  ro: {
    projects: [
      {
        id: "alphabet",
        title: "ColorƒÉm »ôi √ÆnvƒÉ»õƒÉm alfabetul",
        description:
          "CombinƒÉ √ÆnvƒÉ»õarea »ôi creativitatea prin aceastƒÉ carte de colorat alfabetul! Fiecare paginƒÉ con»õine o literƒÉ mare √ÆnconjuratƒÉ de ilustra»õii care √Æncep cu acea literƒÉ, pentru ca micu»õul tƒÉu sƒÉ le coloreze. O modalitate distractivƒÉ »ôi interactivƒÉ de a stƒÉp√¢ni alfabetul dezvolt√¢nd abilitƒÉ»õile motrice fine »ôi vocabularul.",
        cover: "img/alphabet-cover.jpg",
        previewTitle: "ColorƒÉm »ôi √ÆnvƒÉ»õƒÉm alfabetul - Previzualizare",
        images: ["img/alphabet-1.jpg", "img/alphabet-2.jpg"],
        previewDescription: `
            <p>DescoperƒÉ o modalitate captivantƒÉ de a-l introduce pe copilul tƒÉu √Æn lumea literelor. AceastƒÉ carte de colorat combinƒÉ distrac»õia cu √ÆnvƒÉ»õarea timpurie a literelor. PerfectƒÉ pentru copii sƒÉ coloreze »ôi sƒÉ √Ænve»õe cuvinte noi.</p>
            <p>De ce √Æi atrage pe copii:</p>
            <ul>
              <li>AjutƒÉ la consolidarea recunoa»ôterii literelor »ôi a fonicii</li>
              <li>√éncurajeazƒÉ dezvoltarea abilitƒÉ»õilor motrice fine prin colorare</li>
              <li>Face √ÆnvƒÉ»õarea alfabetului distractivƒÉ »ôi interactivƒÉ</li>
              <li>Ideal pentru pre»ôcolari »ôi clasele primare</li>
            </ul>
          `,
      },
      {
        id: "math",
        title: "ColorƒÉm »ôi √ÆnvƒÉ»õƒÉm numerele",
        description:
          "ExploreazƒÉ lumea numerelelor √Æntr-un mod distractiv »ôi interactiv cu aceastƒÉ carte de colorat captivantƒÉ. Fiecare paginƒÉ este plinƒÉ cu multiple activitƒÉ»õi de √ÆnvƒÉ»õare concepute pentru a dezvolta recunoa»ôterea numerelor »ôi abilitƒÉ»õile de numƒÉrare. Fiecare paginƒÉ oferƒÉ o varietate de activitƒÉ»õi captivante, toate concepute pentru colorat »ôi pentru a face √ÆnvƒÉ»õarea numerelor o aventurƒÉ!",
        cover: "img/numbers-cover.jpg",
        previewTitle: "ColorƒÉm »ôi √ÆnvƒÉ»õƒÉm numerele - Previzualizare",
        images: ["img/numbers-1.jpg", "img/numbers-2.jpg"],
        previewDescription: `
            <p>ActivitƒÉ»õi:</p>
            <ul>
              <li>GƒÉse»ôte »ôi √éncercuie»ôte - GƒÉse»ôte numƒÉrul corect ascuns printre alte numere pe paginƒÉ</li>
              <li>TraseazƒÉ »ôi √énva»õƒÉ - ExerseazƒÉ scrierea numerelor cu exerci»õii de trasare, vizualiz√¢nd at√¢t cifra c√¢t »ôi forma sa scrisƒÉ</li>
              <li>NumƒÉrƒÉ »ôi ColoreazƒÉ - CompleteazƒÉ provocƒÉri distractive de numƒÉrare precum "C√¢»õi fluturi sunt?" »ôi activitƒÉ»õi de potrivire unde identificƒÉ obiecte care se potrivesc cu fiecare numƒÉr</li>
              <li>ColoreazƒÉ »ôi CreeazƒÉ - DƒÉ via»õƒÉ fiecƒÉrei pagini prin culori</li>
            </ul>
          `,
      },
      {
        id: "roadFun",
        title: "Pe drum cu distrac»õia",
        description:
          "»öine copiii ocupa»õi oriunde cu aceastƒÉ carte compactƒÉ de activitƒÉ»õi, perfectƒÉ pentru cƒÉlƒÉtorii, sƒÉli de a»ôteptare sau cƒÉlƒÉtorii cu ma»ôina. PlinƒÉ cu activitƒÉ»õi captivante de antrenament al min»õii √Æntr-un format mic, u»ôor de transportat »ôi de printat.",
        cover: "img/roadFun-cover.jpg",
        previewTitle: "Pe drum cu distrac»õia - Previzualizare",
        images: ["img/roadFun-1.jpg", "img/roadFun-2.jpg"],
        previewDescription: `
            <p>U»ôoarƒÉ, portabilƒÉ »ôi distractivƒÉ, arma ta secretƒÉ pentru a »õine copiii ocupa»õi √Æn deplasare!</p>
            <p>ActivitƒÉ»õile includ:</p>
            <ul>
              <li>Potrivire - AsociazƒÉ »ôi potrive»ôte culorile cu obiecte</li>
              <li>AsociazƒÉ conceptele - ConecteazƒÉ concepte »ôi idei √Ænrudite</li>
              <li>Potrivire de umbre - GƒÉse»ôte »ôi potrive»ôte obiectele cu umbrele lor</li>
              <li>GƒÉse»ôte intrusul - IdentificƒÉ intrusul (obiectul care nu apar»õine grupului)</li>
              <li>Potrive»ôte habitatul - PlaseazƒÉ animalele √Æn mediile lor naturale</li>
            </ul>
            <p>PotrivitƒÉ pentru:</p>
            <ul>
              <li>Dimensiune compactƒÉ perfectƒÉ pentru cƒÉlƒÉtorii, restaurante »ôi sƒÉli de a»ôteptare</li>
              <li>U»ôor de printat acasƒÉ, fƒÉrƒÉ materiale speciale necesare</li>
              <li>»öine copiii concentra»õi »ôi implica»õi ore √Æntregi</li>
              <li>DezvoltƒÉ g√¢ndirea criticƒÉ »ôi abilitƒÉ»õile de observare</li>
              <li>Divertisment fƒÉrƒÉ ecrane</li>
            </ul>
          `,
      },
      {
        id: "backpackFun",
        title: "Distrac»õie √Æn rucsac",
        description:
          "DezvoltƒÉ abilitƒÉ»õi esen»õiale pentru a √ÆnvƒÉ»õa scrisul cu aceastƒÉ carte captivantƒÉ de trasare. PerfectƒÉ pentru dezvoltarea controlului, motricitƒÉ»õii fine »ôi coordonarea m√¢nƒÉ-ochi. Fiecare paginƒÉ oferƒÉ o varietate de provocƒÉri de trasare pentru o √ÆnvƒÉ»õare distractivƒÉ »ôi variatƒÉ.",
        cover: "img/backpackFun-cover.jpg",
        previewTitle: "Distrac»õie √Æn rucsac - Previzualizare",
        images: ["img/backpackFun-1.jpg", "img/backpackFun-2.jpg"],
        previewDescription: `
            <p>Fiecare paginƒÉ este conceputƒÉ cu grijƒÉ pentru a face trasarea o aventurƒÉ, nu o corvoadƒÉ. UrmƒÉre»ôte cum √Æncrederea »ôi abilitƒÉ»õile copilului tƒÉu cresc cu fiecare paginƒÉ completatƒÉ!</p>
            <p>ActivitƒÉ»õile includ:</p>
            <ul>
              <li>Trasare - UrmƒÉre»ôte diferite tipuri de linii (drepte, ondulate, √Æn zigzag, curbe) pentru a dezvolta controlul stiloului</li>
              <li>Trasare Forme »ôi Modele - TraseazƒÉ forme de bazƒÉ »ôi modele decorative pentru a dezvolta precizia</li>
              <li>Conexiuni Punct-la-Punct - ConecteazƒÉ puncte numerotate pentru a dezvƒÉlui imagini distractive</li>
              <li>Trasare Numere »ôi Litere - ExerseazƒÉ scrierea numerelor »ôi literelor pe linii punctate</li>
            </ul>
            <p>De ce iubesc copiii:</p>
            <ul>
              <li>Construie»ôte √Æncrederea »ôi independen»õa √Æn abilitƒÉ»õile de pre-scriere</li>
              <li>Face √ÆnvƒÉ»õarea distractivƒÉ »ôi interactivƒÉ prin activitƒÉ»õi variate</li>
              <li>DezvoltƒÉ for»õa »ôi controlul m√¢inii necesare pentru scriere</li>
              <li>Perfect pentru pre»ôcolari »ôi clasele primare</li>
            </ul>
          `,
      },
      {
        id: "routine",
        title: "Panou rutinƒÉ",
        description:
          "FƒÉ rutina de diminea»õƒÉ »ôi searƒÉ mai u»ôoare cu acest panou interactiv de rutinƒÉ conceput pentru a ajuta copiii sƒÉ dezvolte obiceiuri sƒÉnƒÉtoase »ôi independen»õƒÉ. Fiecare panou prezintƒÉ ilustra»õii colorate cu text clar pentru fiecare sarcinƒÉ zilnicƒÉ, cre√¢nd o listƒÉ de verificare vizualƒÉ pe care copiii o pot urma singuri.",
        cover: "img/routine-cover.jpg",
        previewTitle: "Panou rutinƒÉ - Previzualizare",
        images: ["img/routine-1.jpg", "img/routine-2.jpg"],
        previewDescription: `
            <p>TransformƒÉ dimine»õile »ôi serile haotice √Æn rutine lini»ôtite »ôi fƒÉrƒÉ stres!</p>
            <p>Cum func»õioneazƒÉ:</p>
            <ul>
              <li>Indicii Vizuale »ôi Textuale - Fiecare activitate este reprezentatƒÉ cu o imagine captivantƒÉ »ôi text simplu (spalƒÉ din»õii, √ÆmbracƒÉ-te, mƒÉn√¢ncƒÉ etc.)</li>
              <li>UrmƒÉre»ôte Progresul - Copiii bifeazƒÉ fiecare sarcinƒÉ pe mƒÉsurƒÉ ce o completeazƒÉ, construind un sentiment de realizare</li>
              <li>Versiuni Diminea»õƒÉ »ôi SearƒÉ - Tablouri separate pentru diferitele rutine din zi</li>
              <li>Design Reutilizabil - Perfect pentru folosit √Æn format digital sau pentru laminat »ôi folosit cu markere sau √Ændoit »ôi prins cu scai</li>
            </ul>
            <p>Perfect pentru:</p>
            <ul>
              <li>Copii mici »ôi pre»ôcolari care √Ænva»õƒÉ rutine de √Ængrijire personalƒÉ</li>
              <li>A transforma sarcinile zilnice din frustrante √Æn a fi distractive</li>
              <li>Construirea abilitƒÉ»õilor de management al timpului</li>
              <li>Crearea unei structuri √Æn dimine»õile »ôi serile aglomerate √Æn familie</li>
              <li>Construirea independen»õei »ôi responsabilitƒÉ»õilor</li>
            </ul>
          `,
      },
      {
        id: "cards",
        title: "Carduri de ActivitƒÉ»õi - 56 ProvocƒÉri Distractive!",
        description:
          "Carduri de activitƒÉ»õi cu tema: Vacan»õƒÉ »ôi CƒÉlƒÉtorie. TransformƒÉ timpul de deplasare »ôi vacan»õele √Æn aventuri de √ÆnvƒÉ»õare captivante cu acest set de 56 de carduri de activitƒÉ»õi. Perfecte pentru drumuri lungi cu ma»ôina, zboruri, camere de hotel sau explorarea unor destina»õii noi, aceste carduri »õin copiii ocupa»õi √Æn timp ce √Ænva»õƒÉ prin joc.",
        cover: "img/cards.jpg",
        previewTitle: "Carduri de activitƒÉ»õi - Previzualizare",
        images: ["img/cards-1.jpg", "img/cards-2.jpg"],
        previewDescription: `
            <p>ExistƒÉ 6 Categorii de ActivitƒÉ»õi:</p>
            <ul>
              <li>üîç ActivitƒÉ»õi de Observaree »ôi Descoperire</li>
              <li>üé® ActivitƒÉ»õi Creative pe H√¢rtie</li>
              <li>üéµ ActivitƒÉ»õi Muzicale »ôi Ritmice</li>
              <li>üìö ActivitƒÉ»õi Educa»õionale Simple</li>
              <li>üé≠ ActivitƒÉ»õi de Joc de Rol</li>
              <li>üëê ActivitƒÉ»õi Senzoriale</li>
            </ul>
            <p>De ce familiile adorƒÉ aceste carduri:</p>
            <ul>
              <li>56 de activitƒÉ»õi diferite √ÆnseamnƒÉ divertisment nesf√¢r»ôit</li>
              <li>Compacte »ôi portabile, perfecte pentru cƒÉlƒÉtorie</li>
              <li>FƒÉrƒÉ ecrane</li>
              <li>DezvoltƒÉ abilitƒÉ»õile de observare, creativitate »ôi imagina»õie</li>
              <li>Func»õioneazƒÉ oriunde: ma»ôinƒÉ, avion, hotel, √Æn aer liber</li>
            </ul>
            <p>Perfect pentru:</p>
            <ul>
              <li>Drumuri lungi cu ma»ôina »ôi deplasƒÉri</li>
              <li>CƒÉlƒÉtorii cu avionul »ôi a»ôteptare √Æn aeroport</li>
              <li>Divertisment √Æn camerele de hotel</li>
              <li>Aventuri la plajƒÉ »ôi √Æn aer liber</li>
              <li>A »õine copiii implica»õi √Æn timp ce exploreazƒÉ locuri noi</li>
            </ul>
          `,
      },
    ],
  },
};

// Current language
let currentLang = "en";

// Initialize
document.addEventListener("DOMContentLoaded", () => {
  renderProjects(); // Render projects first
  initLanguageSwitcher(); // Then init language switcher
  initSmoothScroll(); // Then init smooth scroll
  initIntersectionObserver();
  initBurgerMenu();
  initHeaderScroll();
});

// Language Switcher
function initLanguageSwitcher() {
  const attachLanguageListeners = () => {
    const langButtons = document.querySelectorAll(".lang-btn");

    langButtons.forEach((btn) => {
      // Remove old listeners by cloning
      const newBtn = btn.cloneNode(true);
      btn.parentNode.replaceChild(newBtn, btn);
    });

    // Attach new listeners
    document.querySelectorAll(".lang-btn").forEach((btn) => {
      btn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        const lang = btn.dataset.lang;
        if (lang !== currentLang) {
          currentLang = lang;
          updateLanguage();

          // Update active state for all buttons
          document
            .querySelectorAll(".lang-btn")
            .forEach((b) => b.classList.remove("active"));
          document
            .querySelectorAll(`[data-lang="${lang}"]`)
            .forEach((b) => b.classList.add("active"));
        }
      });
    });
  };

  attachLanguageListeners();
}

function updateLanguage() {
  const activePreview = document.querySelector(".project-card.active");
  const activeProjectId = activePreview ? activePreview.dataset.project : null;

  document.querySelectorAll("[data-en]").forEach((el) => {
    const text = el.dataset[currentLang];
    if (text) {
      el.textContent = text;
    }
  });

  document.documentElement.lang = currentLang;

  renderProjects();

  if (activeProjectId) {
    showPreview(activeProjectId);
  }
}

// Render Projects
function renderProjects() {
  const projectsGrid = document.getElementById("projectsGrid");
  const projects = translations[currentLang].projects;

  projectsGrid.innerHTML = projects
    .map(
      (project) => `
      <div class="project-card" data-project="${
        project.id
      }" onclick="showPreview('${project.id}')">
        <div class="project-image">
          <img src="${project.cover}" alt="${project.title}" />
        </div>
        <h3>${project.title}</h3>
        <p>${project.description}</p>
        
        <div class="project-preview" id="preview-${project.id}">
          <div class="preview-header">
            <h3 class="preview-title">${project.previewTitle}</h3>
            <button class="close-preview" onclick="event.stopPropagation(); closePreview('${
              project.id
            }')">
              ${currentLang === "en" ? "Close" : "√énchide"}
            </button>
          </div>
          <div class="preview-images">
            ${project.images
              .map(
                (img) => `
              <div class="preview-image">
                <img src="${img}" alt="${project.title}" />
              </div>
            `
              )
              .join("")}
          </div>
          <div class="preview-description">
            ${project.previewDescription}
          </div>
          <div class="preview-footer">
            <button class="close-preview-bottom" onclick="event.stopPropagation(); closePreview('${
              project.id
            }')">
              ${currentLang === "en" ? "Close" : "√énchide"}
            </button>
          </div>
        </div>
      </div>
    `
    )
    .join("");
}

// Project Preview Functions
function showPreview(projectId) {
  const projectsGrid = document.getElementById("projectsGrid");
  const projectCard = document.querySelector(`[data-project="${projectId}"]`);
  const preview = document.getElementById(`preview-${projectId}`);

  // Hide all other cards and show only the selected one
  document.querySelectorAll(".project-card").forEach((card) => {
    card.classList.remove("active");
  });

  projectCard.classList.add("active");
  projectsGrid.classList.add("preview-mode");

  // Show the preview
  document.querySelectorAll(".project-preview").forEach((p) => {
    p.classList.remove("active");
  });
  preview.classList.add("active");

  // Scroll to the project
  setTimeout(() => {
    // Get the dynamic height of the fixed header
    const headerHeight = document.querySelector("header").offsetHeight;

    // Calculate the correct top position
    const targetPosition =
      projectCard.getBoundingClientRect().top + // Element's top relative to viewport
      window.pageYOffset - // Current page scroll Y
      headerHeight - // Offset for the fixed header
      10; // A 10px top margin for spacing

    window.scrollTo({
      top: targetPosition,
      behavior: "smooth",
    });
  }, 100); // The 100ms delay is good, it lets the classes apply first
}

function closePreview(projectId) {
  const projectsGrid = document.getElementById("projectsGrid");
  const preview = document.getElementById(`preview-${projectId}`);

  // Hide preview and show all cards
  preview.classList.remove("active");
  projectsGrid.classList.remove("preview-mode");

  document.querySelectorAll(".project-card").forEach((card) => {
    card.classList.remove("active");
  });
}

// Smooth Scrolling
function initSmoothScroll() {
  // Handle both desktop and mobile menu links
  const handleNavClick = (e) => {
    e.preventDefault();
    e.stopPropagation();

    const href = e.currentTarget.getAttribute("href");

    // Only handle hash links
    if (href && href.startsWith("#")) {
      const target = document.querySelector(href);
      if (target) {
        // Close mobile menu if open
        const mobileMenu = document.querySelector(".mobile-menu");
        const burgerMenu = document.querySelector(".burger-menu");
        if (mobileMenu && mobileMenu.classList.contains("active")) {
          mobileMenu.classList.remove("active");
          burgerMenu.classList.remove("active");
        }

        // Scroll to target
        const headerHeight = document.querySelector("header").offsetHeight;
        const targetPosition =
          target.getBoundingClientRect().top +
          window.pageYOffset -
          headerHeight;

        window.scrollTo({
          top: targetPosition,
          behavior: "smooth",
        });
      }
    }
  };

  // Add listeners to all navigation links INCLUDING cta-button
  document
    .querySelectorAll(".nav-links a, .mobile-menu a")
    .forEach((anchor) => {
      anchor.addEventListener("click", handleNavClick);
    });

  // Separate handler for CTA button
  document.querySelectorAll(".cta-button").forEach((btn) => {
    btn.addEventListener("click", handleNavClick);
  });
}

// Intersection Observer for Scroll Animations
function initIntersectionObserver() {
  const observerOptions = {
    threshold: 0.1,
    rootMargin: "0px 0px -50px 0px",
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("visible");
      }
    });
  }, observerOptions);

  // Observe all sections
  document.querySelectorAll("section").forEach((section) => {
    observer.observe(section);
  });
}

// Burger Menu
function initBurgerMenu() {
  const burgerMenu = document.querySelector(".burger-menu");
  const mobileMenu = document.querySelector(".mobile-menu");

  if (burgerMenu) {
    burgerMenu.addEventListener("click", (e) => {
      e.stopPropagation();
      burgerMenu.classList.toggle("active");
      mobileMenu.classList.toggle("active");
    });
  }

  // Close menu when clicking on a link (but NOT on document click)
  if (mobileMenu) {
    mobileMenu.querySelectorAll("a").forEach((link) => {
      link.addEventListener("click", () => {
        burgerMenu.classList.remove("active");
        mobileMenu.classList.remove("active");
      });
    });
  }
}

// Header Scroll Effect
function initHeaderScroll() {
  window.addEventListener("scroll", () => {
    const header = document.querySelector("header");
    if (window.scrollY > 100) {
      header.style.background = "rgba(248, 250, 252, 0.98)";
    } else {
      header.style.background = "rgba(248, 250, 252, 0.95)";
    }
  });
}

// Add loading animation
window.addEventListener("load", () => {
  document.body.style.opacity = "1";
});
